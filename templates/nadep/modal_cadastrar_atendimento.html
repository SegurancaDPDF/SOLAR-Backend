<!-- Modal Cadastrar Fase -->
<div id="modal-cadastrar-atendimento" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Atendimento ao Interessado</h3>
    </div>
    <!--  Corpo do Modal........... -->
    <div class="modal-body">
        <form id="CadastroAtendimentoForm" action="" method="">
            {% csrf_token %}
            <input type="hidden" name="processo" value="{{ prisao.processo.id }}">

            <div class="hidden">
                <input type="text" name="id" ng-model="atendimento.id">
            </div>
            <div class="row-fluid">
                <div class="control-group span12">
                    <label class="control-label">Defensor</label>

                    <div class="controls">
                        <select class="span12" ng-model="atendimento.defensor"
                                ng-options="d.id as d.nome for d in defensores" ng-disabled="atendimento.id">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="control-group span12">
                    <label class="control-label">Defensoria</label>

                    <div class="controls">
                        <select class="span12" ng-model="atendimento.defensoria"
                                ng-options="d.id as d.nome for d in defensorias" ng-disabled="atendimento.id">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="control-group span3">
                    <label class="control-label">CPF</label>

                    <div class="controls">
                        <input class="span12" type="text" ng-model="atendimento.pessoa.cpf" ng-disabled="atendimento.id"
                               ui-mask="999.999.999-99" data-validate="{required:false,cpf:true}"
                               ng-change="buscar_cpf()">
                    </div>
                </div>
                <div class="control-group span9">
                    <label class="control-label">Nome do Interessado</label>

                    <div class="controls">
                        <input class="span12" type="text" ng-model="atendimento.pessoa.nome"
                               ng-disabled="atendimento.id">
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="control-group span3">
                    <label class="control-label">Parentesco</label>

                    <div class="controls">
                        <select class="span12" ng-model="atendimento.parentesco_preso" ng-disabled="atendimento.id">
                            <option value="1">Mãe/Pai</option>
                            <option value="2">Filho/Filha</option>
                            <option value="3">Irmão/Irmã</option>
                            <option value="4">Esposo/Esposa</option>
                            <option value="0">Outro</option>
                        </select>
                    </div>
                </div>
                <div class="control-group span9">
                    <label class="control-label">Telefone</label>

                    <div class="controls">
                        <input class="span12" type="text" ng-model="atendimento.pessoa.telefones[0].telefone"
                               ng-disabled="atendimento.id"
                               ui-mask="[[ atendimento.pessoa.telefones[0].telefone.length == 11 ? '(99)99999-9999' : '(99)9999-9999?9' ]]">
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="control-group span10">
                    <label class="control-label">Endereço</label>

                    <div class="controls">
                        <input class="span12" type="text" ng-model="atendimento.pessoa.logradouro"
                               ng-disabled="atendimento.id">
                    </div>
                </div>
                <div class="control-group span2">
                    <label class="control-label">Número</label>

                    <div class="controls">
                        <input class="span12" type="text" ng-model="atendimento.pessoa.numero"
                               ng-disabled="atendimento.id">
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="control-group span2">
                    <label class="control-label">UF</label>

                    <div class="controls">
                        <select class="span12" type="text" ng-model="atendimento.pessoa.estado"
                                ng-options="i.id as i.uf for i in estados" ng-change="listar_municipios()"
                                ng-disabled="atendimento.id"></select>
                    </div>
                </div>
                <div class="control-group span10">
                    <label class="control-label">Município</label>

                    <div class="controls">
                        <select class="span12" type="text" ng-model="atendimento.pessoa.municipio"
                                ng-options="i.id as i.nome for i in municipios" ng-disabled="atendimento.id"></select>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="control-group span12">
                    <label class="control-label"><b>Assunto</b></label>

                    <div class="controls">
                        <input class="span12" type="text" ng-model="atendimento.assunto" ng-disabled="atendimento.id">
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <!-- Descricao andamento-->
                    <label><b>Histórico</b></label>
                    <textarea class="span12" name="descricao" rows="5" ng-model="atendimento.historico"
                              ng-disabled="atendimento.id"></textarea>
                </div>
                <!--Fim Descricao andamento-->
            </div>
        </form>
    </div>
    <!--  Corpo do Modal -->
    <div class="modal-footer">
        <button class="btn btn-primary" type="submit" form="CadastroAtendimentoForm" ng-disabled="atendimento.id"
                ng-click="salvar_atendimento()">Salvar
        </button>
        <a class="btn" data-dismiss="modal" aria-hidden="true">Cancelar</a>
    </div>
</div>
<!-- Modal Cadastrar Fase -->
